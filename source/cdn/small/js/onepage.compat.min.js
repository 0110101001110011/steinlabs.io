"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Typewriter=function(){function e(){_classCallCheck(this,e),this.currentElement=null,this.typing=!1,this.index=0,this.loopSleep=0,this.innerHTML=null,this.currentID=0,this.forceFinish=!1}return _createClass(e,[{key:"recursiveType",value:function(e,t){var n=this;if(this.currentID==e&&this.typing&&!(this.index>this.endIndex))return this.forceFinish?(this.currentElement.innerHTML=this.innerHTML,this.forceFinish=!1,void(this.typing=!1)):void setTimeout(function(){if("<"==n.innerHTML.charAt(n.index)){for(var i="";">"!=n.innerHTML.charAt(n.index);)i+=n.innerHTML.charAt(n.index),n.index++;n.currentElement.innerHTML+=i+">",n.index++,t="</"+i.charAt(1)+">"}else t?n.currentElement.innerHTML=n.currentElement.innerHTML.replace(t,"")+n.innerHTML.charAt(n.index):n.currentElement.innerHTML+=n.innerHTML.charAt(n.index),n.index++;n.recursiveType(e,t)},this.loopSleep);this.typing=!1}},{key:"resetPreviousElement",value:function(){this.currentElement&&(this.currentElement.innerHTML=this.innerHTML)}},{key:"type",value:function(e,t){this.stop(),this.currentID++;var n=this.currentID;this.typing=!0,this.currentElement=e,this.index=0,this.loopSleep=Math.floor(1e3/t),this.innerHTML=e.innerHTML.trim(),this.endIndex=this.innerHTML.length,this.currentElement.textContent="",this.recursiveType(n,null)}},{key:"stop",value:function(){this.typing=!1,this.resetPreviousElement()}},{key:"isTyping",value:function(){return this.typing}},{key:"finish",value:function(){this.forceFinish=!0}}]),e}(),SCROLL_TARGET=document.getElementById("scroll-target"),PAGES=[].slice.call(document.getElementsByClassName("section-base")).sort(function(e,t){return e.id>t.id}),MAX_INDEX=Math.max(PAGES.length-1,0),CURRENT_INDEX=0,CONTENT_INDICATOR=document.getElementById("content-indicator"),VN_TEXT_BLOCKS=[].slice.call(document.getElementsByClassName("vn-text")).sort(function(e,t){return e.id>t.id}),CURRENT_VN_TEXT_INDEX=0,MAX_VN_TEXT_INDEX=Math.max(VN_TEXT_BLOCKS.length-1,0),VN_ARROW_LEFT=document.getElementById("vn-arrow-left"),VN_ARROW_RIGHT=document.getElementById("vn-arrow-right"),PORTFOLIO_THUMBNAILS=document.getElementsByClassName("portfolio-thumbnail"),PORTFOLIO_PAGES=[].slice.call(document.getElementsByClassName("portfolio-page-wrapper")).reduce(function(e,t){return e[t.id]=t,e},{}),PORTFOLIO_X_BUTTONS=document.getElementsByClassName("portfolio-x-button"),PORTFOLIO_OPEN=!1,TIME_PER_PAGE=400,ZS=zenscroll.createScroller(SCROLL_TARGET,TIME_PER_PAGE,0),TYPEWRITER=new Typewriter,SPLASH_VIDEO=document.getElementById("splash-video"),LAST_SCROLL_DELTA=0,LAST_HASH=window.location.hash;function clamp(e,t,n){return Math.min(Math.max(e,t),n)}function getScrollbarWidth(){return window.innerWidth-SCROLL_TARGET.clientWidth}function vnStep(e,t){e&&e.preventDefault();var n=CURRENT_VN_TEXT_INDEX,i=clamp(CURRENT_VN_TEXT_INDEX+t,0,MAX_VN_TEXT_INDEX);n!=i&&(TYPEWRITER.isTyping()?TYPEWRITER.finish():(CURRENT_VN_TEXT_INDEX=i,VN_TEXT_BLOCKS[n].classList.toggle("hidden"),TYPEWRITER.type(VN_TEXT_BLOCKS[CURRENT_VN_TEXT_INDEX],16),VN_TEXT_BLOCKS[CURRENT_VN_TEXT_INDEX].classList.toggle("hidden"))),0==CURRENT_VN_TEXT_INDEX?(VN_ARROW_LEFT.classList.add("non-active"),VN_ARROW_RIGHT.classList.remove("non-active")):CURRENT_VN_TEXT_INDEX==MAX_VN_TEXT_INDEX?(VN_ARROW_LEFT.classList.remove("non-active"),VN_ARROW_RIGHT.classList.add("non-active")):(VN_ARROW_LEFT.classList.remove("non-active"),VN_ARROW_RIGHT.classList.remove("non-active"))}function scrollToSection(e){difference=e-CURRENT_INDEX,LAST_SCROLL_DELTA=clamp(difference,-1,1),scroll(difference,difference)}function scroll(e,t){if(!ZS.moving()&&!(document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement)){LAST_SCROLL_DELTA=clamp(e,-1,1),CURRENT_INDEX=clamp(CURRENT_INDEX+LAST_SCROLL_DELTA*t,0,MAX_INDEX);var n=TIME_PER_PAGE*Math.ceil(Math.abs(t)/2);0==CURRENT_INDEX&&SPLASH_VIDEO.play(),ZS.to(PAGES[CURRENT_INDEX],n,function(){0!=CURRENT_INDEX&&SPLASH_VIDEO.pause(),history.pushState(null,null,document.location.pathname+"#s"+CURRENT_INDEX),LAST_HASH=window.location.hash})}}function scrollWrap(e,t){scroll(e,t)}function togglePortfolioPage(e,t){t?(PORTFOLIO_PAGES[e].classList.add("portfolio-page-visible"),PORTFOLIO_PAGES[e].style.pointerEvents="",PORTFOLIO_OPEN=e,toggleGalleries(!0,0,e)):(PORTFOLIO_PAGES[e].classList.remove("portfolio-page-visible"),PORTFOLIO_PAGES[e].style.pointerEvents="none",[].slice.call(VIDEO_PLAYERS).forEach(function(e){e.pause()}),PORTFOLIO_OPEN=null,toggleGalleries(!1,500))}function updateIndexByHash(){0==(CURRENT_INDEX=window.location.hash&&window.location.hash.match("^#s[0-9]$")?parseInt(window.location.hash.replace("#s","")):0)&&SPLASH_VIDEO.play(),ZS.to(PAGES[CURRENT_INDEX],0),0!=CURRENT_INDEX?SPLASH_VIDEO.pause():SPLASH_VIDEO.play()}function init(){updateIndexByHash(),SCROLL_TARGET.addEventListener("wheel",function(e){scroll(e.deltaY,1),e.preventDefault()}),SCROLL_TARGET.addEventListener("touchstart",function(e){LAST_Y_POS=e.targetTouches[0].clientY}),SCROLL_TARGET.addEventListener("touchmove",function(e){scroll(LAST_Y_POS-e.targetTouches[0].clientY,1),e.preventDefault(),LAST_Y_POS=e.targetTouches[0].clientY}),window.addEventListener("keydown",function(e){var t=e.keyCode;[34,35,40].includes(t)||32==t&&!e.shiftKey?(scroll(1,35==t?MAX_INDEX:1),e.preventDefault()):([33,36,38].includes(t)||32==t&&e.shiftKey)&&(scroll(-1,36==t?MAX_INDEX:1),e.preventDefault()),1==CURRENT_INDEX&&([8,37].includes(t)?vnStep(null,-1):[13,39].includes(t)&&vnStep(null,1)),2==CURRENT_INDEX&&([8,37].includes(t)?traverseActiveGallery(e,!0):[13,39].includes(t)&&traverseActiveGallery(e,!1),27==t&&PORTFOLIO_OPEN&&togglePortfolioPage(PORTFOLIO_OPEN,!1))}),SCROLL_TARGET.addEventListener("mousedown",function(e){2==e.button&&(LAST_Y_POS=e.clientY,e.preventDefault())}),SCROLL_TARGET.addEventListener("mousemove",function(e){1==e.button&&(scroll(e.clientY-LAST_Y_POS,1),e.preventDefault(),LAST_Y_POS=e.clientY)}),VN_ARROW_LEFT.addEventListener("click",function(e){vnStep(e,-1)}),VN_ARROW_RIGHT.addEventListener("click",function(e){vnStep(e,1)}),VN_ARROW_LEFT.addEventListener("touchmove",function(e){e.stopPropagation(),e.preventDefault()}),VN_ARROW_RIGHT.addEventListener("touchmove",function(e){e.stopPropagation(),e.preventDefault()}),window.addEventListener("resize",function(e){ZS.stop(),ZS.to(PAGES[CURRENT_INDEX],0)});for(var e=function(e){PORTFOLIO_THUMBNAILS[e].addEventListener("click",function(t){togglePortfolioPage(PORTFOLIO_THUMBNAILS[e].id.replace("tn-",""),!0)})},t=0;t<PORTFOLIO_THUMBNAILS.length;t++)e(t);var n=function(e){PORTFOLIO_X_BUTTONS[e].addEventListener("click",function(t){togglePortfolioPage(PORTFOLIO_THUMBNAILS[e].id.replace("tn-",""),!1)})};for(t=0;t<PORTFOLIO_X_BUTTONS.length;t++)n(t);window.addEventListener("hashchange",function(e){PORTFOLIO_OPEN&&2==CURRENT_INDEX?(togglePortfolioPage(PORTFOLIO_OPEN,!1),history.pushState(null,null,document.location.pathname+LAST_HASH),e.stopPropagation(),e.preventDefault()):updateIndexByHash()})}init();