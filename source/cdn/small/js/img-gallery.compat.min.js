"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),toggleGalleries=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,new Promise(function(e){return setTimeout(e,n)});case 3:PORTFOLIO_IMG_GALLERIES.has("ig-"+i)&&(i?PORTFOLIO_IMG_GALLERIES.get("ig-"+i).toggleDisplay(t):PORTFOLIO_IMG_GALLERIES.forEach(function(e){e.toggleDisplay(t)})),CURRENT_ACTIVE_GALLERY=t?i:null;case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(r,s){try{var o=t[r](s),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ImgGallery=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.container=t,this.bufferSize=n;for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r].className&&t.childNodes[r].className.includes("left-button"))this.leftButton=t.childNodes[r],this.leftButton.addEventListener("click",function(e){return i.traverse(e,!0)}),this.leftButton.addEventListener("dblclick",function(e){return e.stopPropagation()});else if(t.childNodes[r].className&&t.childNodes[r].className.includes("right-button"))this.rightButton=t.childNodes[r],this.rightButton.addEventListener("click",function(e){return i.traverse(e,!1)}),this.rightButton.addEventListener("dblclick",function(e){return e.stopPropagation()});else if(t.childNodes[r].className&&t.childNodes[r].className.includes("img-gallery-inner")){this.images=t.childNodes[r].getElementsByTagName("img");for(var s=0;s<this.images.length;s++)this.images[s].loaded=!1;this.images[0].src=this.images[0].dataset.source,this.images[0].loaded=!0}else;this.busy=!1,this.index=0,this.controlTimeout=0,this.controlTimeoutMax=100,this.isMouseOver=!1,Date.now||(Date.now=function(){return(new Date).getTime()}),this.container.addEventListener("dblclick",function(e){return i.fullScreenToggle(e)}),this.container.addEventListener("mousemove",function(e){return i.triggerControls(e)}),this.container.addEventListener("mouseenter",function(e){return i.toggleMouseOver(!0)}),this.container.addEventListener("mouseleave",function(e){return i.toggleMouseOver(!1)}),this.container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.loadNeighbours(this.index)}return _createClass(e,[{key:"traverse",value:function(e,t){if(e.stopPropagation(),e.preventDefault(),!this.busy){this.busy=!0;var n=t?-1:1;this.images[this.index].classList.remove("show-element"),this.index=this.incRotary(this.index,n,0,this.images.length-1),this.images[this.index].classList.add("show-element"),this.loadNeighbours(this.index),this.busy=!1}}},{key:"fullScreenToggle",value:function(e){document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen()}},{key:"triggerControls",value:function(e){this.controlTimeout=Date.now()+this.controlTimeoutMax;for(var t,n=(t=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(function(){if(!n.isMouseOver&&Date.now()-n.controlTimeout>=0)for(var e=0;e<t.length;e++)t[e].classList.remove("show-element")},n.controlTimeoutMax);case 1:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)}),i=[this.rightButton,this.leftButton],r=0;r<i.length;r++)i[r].classList.add("show-element");n(i,this)}},{key:"loadNeighbours",value:function(e){var t;(t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,i,r,s){var o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o=0-s/2;o<=s/2;o++)0!=o&&(l=n(e,o,0,r-1),i[l].loaded||(i[l].src=i[l].dataset.source,i[l].loaded=!0));case 1:case"end":return t.stop()}},t,this)})),function(e,n,i,r){return t.apply(this,arguments)})(this.incRotary,this.images,this.images.length,this.bufferSize)}},{key:"toggleDisplay",value:function(e){this.container.style.display=e?"block":"none"}},{key:"toggleMouseOver",value:function(e){this.isMouseOver=e,e||(this.controlTimeout=0)}},{key:"incRotary",value:function(e,t,n,i){var r=e+t;return r<n?i-Math.abs(r+1)%(i+1):r>n?0+r%(i+1):r}}]),e}(),PORTFOLIO_IMG_GALLERIES=[].slice.call(document.getElementsByClassName("img-gallery")).reduce(function(e,t){return e[t.id]=new ImgGallery(t,4),new Map(Object.entries(e))},{}),CURRENT_ACTIVE_GALLERY=null;function traverseActiveGallery(e,t){CURRENT_ACTIVE_GALLERY&&PORTFOLIO_IMG_GALLERIES.has("ig-"+CURRENT_ACTIVE_GALLERY)&&PORTFOLIO_IMG_GALLERIES.get("ig-"+CURRENT_ACTIVE_GALLERY).traverse(e,t)}